Microsoft (R) Macro Assembler Version 5.10                  1/18/20 01:13:10
                                                             Page     1-1


				.386
				
				PUBLIC SOUND
				
				.MODEL LARGE
 0000				DATA1 SEGMENT PARA 'DATA'
				
				
 0000  4B 49 4E 47 53 56	FILENAME DB 'KINGSV.WAV', 0
       2E 57 41 56 00		
 000B  0000			FILEHANDLE DW ?
 000D  C949[			SOUNDDATA DB 51529 DUP(0)
	   00			
			 ]	
				
				
 C956				DATA1 ENDS
				
				.CODE
 0000				SOUND PROC FAR
				    
				    ASSUME DS:DATA1
 0000  66| B8 ---- R		    MOV AX , DATA1
 0004  66| 8E D8		    MOV DS , AX
					
 0007  E8 00000087 R		    CALL OPENFILE
 000C  E8 0000009B R		    CALL READDATA
					
 0011  66| 8D 1D 0000000D R	    LEA BX , SOUNDDATA ; BL CONTAINS INDEX AT T
				HE CURRENT DRAWN PIXEL
					
					
				; DRAWING LOOP
 0018				ALOOP:
 0018  66| BA 022C		    MOV DX, 22CH
 001C  B0 10				MOV AL, 10H
 001E  EE				OUT DX, AL
 001F  67| 8A 07			MOV AL,[BX]
 0022  EE				OUT DX, AL
 0023  66| B9 24D9			MOV CX, 9433
 0027					DELAY:
 0027  90				NOP
 0028  E2 FD				LOOP DELAY 
 002A  66| 50			    PUSH AX
				    ;{ TAKE THE USER INPUT FROM THE KEYBOARD BU
				FFER
 002C  B4 01			         MOV    AH, 1
 002E  CD 16			         INT    16H
 0030  0F 84 00000047 R		         JZ     CON      
				    ;} 
				    ;{
 0036  B4 00			        MOV    AH, 0
 0038  CD 16			        INT    16H
 003A  E8 00000063 R		        CALL   CLRBUFF
Microsoft (R) Macro Assembler Version 5.10                  1/18/20 01:13:10
                                                             Page     1-2


 003F  3C 1B			        CMP    AL,1BH
 0041  0F 84 00000054 R		        JE    EXITPROG
				    ;}
 0047				    CON:
 0047  66| 58			    POP AX
 0049  66| 43			    INC BX
 004B  66| 81 FB C949		    CMP BX , 51529
 0050  75 C6			JNE ALOOP
 0052  66| 50			PUSH   AX
 0054				EXITPROG:
 0054  66| 58			    POP  AX
 0056  E8 000000B2 R		    CALL CLOSEFILE
				
 005B  66| B8 ---- R		    MOV AX,@DATA
 005F  66| 8E D8		    MOV DS,AX
				   
 0062  CB			RETF   
 0063				SOUND ENDP
				   
				;--------------------------------------
 0063				CLRBUFF		PROC NEAR
 0063  66| 50				PUSH		AX
 0065  06				PUSH		ES
 0066  66| B8 0000			MOV		AX, 0000H
 006A  66| 8E C0			MOV		ES, AX
 006D  26: C7 05 0000041A		MOV		ES:[041AH], 041EH
       0000041E			
 0078  26: C7 05 0000041C		MOV		ES:[041CH], 041EH
								; CLEARS KEYBOA
				RD BUFFER
       0000041E			
 0083  07				POP		ES
 0084  66| 58				POP		AX
 0086  C3				RETN
 0087				CLRBUFF		ENDP 
				
				
				;------------------------------------------
				
 0087				OPENFILE PROC NEAR
				
				    ; OPEN FILE
				
 0087  B4 3D			    MOV AH, 3DH
 0089  B0 00			    MOV AL, 0 ; READ ONLY
 008B  66| 8D 15 00000000 R	    LEA DX, FILENAME
 0092  CD 21			    INT 21H
				    
				    ; YOU SHOULD CHECK CARRY FLAG TO MAKE SURE 
				IT WORKED CORRECTLY
				    ; CARRY = 0 -> SUCCESSFUL , FILE HANDLE -> 
				AX
				    ; CARRY = 1 -> FAILED , AX -> ERROR CODE
				     
Microsoft (R) Macro Assembler Version 5.10                  1/18/20 01:13:10
                                                             Page     1-3


 0094  66| A3 0000000B R	    MOV [FILEHANDLE], AX
				    
 009A  C3			    RETN
				
 009B				OPENFILE ENDP
				
				
				
				;----------------------------------------------
				-
				
				
 009B				READDATA PROC NEAR
				
 009B  B4 3F			    MOV AH,3FH
 009D  66| 8B 1D 0000000B R	    MOV BX, [FILEHANDLE]
 00A4  66| B9 C949		    MOV CX, 51529 ; NUMBER OF BYTES TO READ
 00A8  66| 8D 15 0000000D R	    LEA DX, SOUNDDATA
 00AF  CD 21			    INT 21H
 00B1  C3			    RETN
 00B2				READDATA ENDP 
				
				;----------------------------------------------
				--
				
 00B2				CLOSEFILE PROC NEAR
 00B2  B4 3E				MOV AH, 3EH
 00B4  66| 8B 1D 0000000B R		MOV BX, [FILEHANDLE]
				
 00BB  CD 21				INT 21H
 00BD  C3				RETN
 00BE				CLOSEFILE ENDP
				
				    
				    
				    
				    
				    END SOUND
Microsoft (R) Macro Assembler Version 5.10                  1/18/20 01:13:10
                                                             Symbols-1


Segments and Groups:

                N a m e         	Size	Length	 Align	Combine Class

DATA1  . . . . . . . . . . . . .  	32 Bit	C956	PARA	NONE	'DATA'
DGROUP . . . . . . . . . . . . .  	GROUP
  _DATA  . . . . . . . . . . . .  	32 Bit	0000	DWORD	PUBLIC	'DATA'
SOUND_TEXT . . . . . . . . . . .  	32 Bit	00BE	DWORD	PUBLIC	'CODE'

Symbols:            

                N a m e         	Type	 Value	 Attr

ALOOP  . . . . . . . . . . . . .  	L NEAR	0018	SOUND_TEXT

CLOSEFILE  . . . . . . . . . . .  	N PROC	00B2	SOUND_TEXT	Length = 000C
CLRBUFF  . . . . . . . . . . . .  	N PROC	0063	SOUND_TEXT	Length = 0024
CON  . . . . . . . . . . . . . .  	L NEAR	0047	SOUND_TEXT

DELAY  . . . . . . . . . . . . .  	L NEAR	0027	SOUND_TEXT

EXITPROG . . . . . . . . . . . .  	L NEAR	0054	SOUND_TEXT

FILEHANDLE . . . . . . . . . . .  	L WORD	000B	DATA1
FILENAME . . . . . . . . . . . .  	L BYTE	0000	DATA1

OPENFILE . . . . . . . . . . . .  	N PROC	0087	SOUND_TEXT	Length = 0014

READDATA . . . . . . . . . . . .  	N PROC	009B	SOUND_TEXT	Length = 0017

SOUND  . . . . . . . . . . . . .  	F PROC	0000	SOUND_TEXT	Global	Length = 0063
SOUNDDATA  . . . . . . . . . . .  	L BYTE	000D	DATA1	Length = C949

@CODE  . . . . . . . . . . . . .  	TEXT  sound_TEXT		
@CODESIZE  . . . . . . . . . . .  	TEXT  1		
@CPU . . . . . . . . . . . . . .  	TEXT  3343		
@DATASIZE  . . . . . . . . . . .  	TEXT  1		
@FILENAME  . . . . . . . . . . .  	TEXT  sound		
@VERSION . . . . . . . . . . . .  	TEXT  510		


    132 Source  Lines
    132 Total   Lines
     29 Symbols

  47886 + 459374 Bytes symbol space free

      0 Warning Errors
      0 Severe  Errors
